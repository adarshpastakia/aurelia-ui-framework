{"version":3,"file":"ui-shared.js","sources":["../../src/shared/ui-divider.ts","../../src/shared/ui-drag-handle.ts","../../src/shared/ui-drop.ts","../../src/shared/ui-filler.ts","../../src/shared/ui-loader.ts","../../src/shared/ui-text-divider.ts","../../src/shared/ui-shared.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-divider\")\n@inlineView(\"<template class='ui-divider'><slot></slot></template>\")\nexport class UIDivider {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\nimport { UIInternal } from \"../utils/ui-internal\";\n\n@customElement(\"ui-drag-handle\")\n@inlineView(`<template class=\"ui-drag-handle\" ui-color=\"gray\"\n    mousedown.trigger=\"fireDragEvent($event,'dragstart')\" click.trigger=\"fireDragEvent($event,'dragend')\"><ui-svg-icon icon=\"drag\"></ui-svg-icon></template>`)\nexport class UIDragHandle {\n  constructor(protected element: Element) {}\n\n  protected fireDragEvent($event: UIEvent, evt) {\n    this.element.dispatchEvent(UIInternal.createEvent(evt));\n    return true;\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2018\n * @license   : MIT\n */\nimport { Subscription } from \"aurelia-event-aggregator\";\nimport { bindable, containerless, customElement, inlineView } from \"aurelia-framework\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport { UIInternal } from \"../utils/ui-internal\";\nimport { UITether } from \"../utils/ui-tether\";\n\n@containerless()\n@customElement(\"ui-drop\")\n@inlineView(\n  `<template><div slot=\"ui-drop\" class=\"ui-drop\" click.delegate=\"closeDrop()\" data-open.bind=\"isOpen\">\n  <div ref=\"vmElement\" class=\"ui-drop__body \\${class}\" click.delegate=\"close($event)\"><slot></slot></div>\n  </div></template>`\n)\nexport class UIDrop {\n  @bindable()\n  public class: string = \"\";\n\n  public vmElement: HTMLDivElement;\n\n  public isOpen: boolean = false;\n  public stretch: boolean = true;\n  public closeOnClick: boolean = true;\n  public attachToViewport: boolean = false;\n\n  public position: UITether.Position;\n  public anchorPosition: UITether.Position;\n  private tetherObj: UITether.Tether;\n\n  private anchorEl: Element;\n  private obClick: Subscription;\n  private obResize: ResizeObserver;\n  private obViewportResize: Subscription;\n\n  constructor(protected element: Element) {\n    this.position = (element.getAttribute(\"position\") as UITether.Position) || \"tl\";\n    this.anchorPosition = (element.getAttribute(\"anchor\") as UITether.Position) || \"bl\";\n    this.closeOnClick = !isFalse(element.getAttribute(\"close-on-click\"));\n    this.attachToViewport = element.hasAttribute(\"attach-to-viewport\");\n  }\n\n  public tether(anchorEl: Element) {\n    this.tetherObj = UITether.tether((this.anchorEl = anchorEl), this.vmElement, {\n      anchorPosition: this.anchorPosition,\n      attachToViewport: this.attachToViewport,\n      position: this.position,\n      resize: this.stretch\n    });\n  }\n\n  public updatePosition() {\n    this.tetherObj.updatePosition();\n  }\n\n  public toggleDrop(open?: boolean): void {\n    this.disposeListeners();\n    this.vmElement.dataset.show = \"false\";\n    this.isOpen = open === undefined ? !this.isOpen : open;\n    if (this.isOpen) {\n      this.obClick = UIInternal.subscribe(UIInternal.EVT_VIEWPORT_CLICK, t => this.canClose(t));\n      // observe viewport resize\n      this.obViewportResize = UIInternal.subscribe(UIInternal.EVT_VIEWPORT_RESIZE, () =>\n        this.updatePosition()\n      );\n      // observe body resize\n      this.obResize = new ResizeObserver(() => this.updatePosition());\n      this.obResize.observe(this.vmElement);\n      this.obResize.observe(this.anchorEl);\n      this.element.dispatchEvent(UIInternal.createEvent(\"open\"));\n      UIInternal.queueMicroTask(() => {\n        this.tetherObj.updatePosition();\n        this.vmElement.dataset.show = \"true\";\n      });\n    }\n  }\n\n  public closeDrop() {\n    UIInternal.queueTask(() => {\n      this.isOpen = false;\n      this.disposeListeners();\n      this.element.dispatchEvent(UIInternal.createEvent(\"close\"));\n    });\n  }\n\n  protected disposeListeners(): void {\n    if (this.obClick) {\n      this.obClick.dispose();\n    }\n    if (this.obResize) {\n      this.obResize.disconnect();\n    }\n    if (this.obViewportResize) {\n      this.obViewportResize.dispose();\n    }\n  }\n\n  protected detached(): void {\n    this.disposeListeners();\n    if (this.tetherObj) {\n      this.tetherObj.dispose();\n    }\n  }\n\n  protected close($event: UIEvent) {\n    if (this.closeOnClick) {\n      this.closeDrop();\n    } else {\n      $event.stopEvent(true);\n    }\n  }\n\n  private canClose(t: Element): void {\n    if (!hasParent(t, this.vmElement) && !hasParent(t, this.anchorEl)) {\n      this.closeDrop();\n    }\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-filler\")\n@inlineView(\"<template class='ui-col ui-col--fill'></template>\")\nexport class UIFiller {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\nimport { bindable, customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-loader\")\n@inlineView(`<template><div ref=\"vmElement\" class=\"ui-loader\" if.bind=\"busy\">\n  <div><ui-svg-icon icon=\"loader\" class=\"ui-anim--spin\"></ui-svg-icon></div>\n</div></template>`)\nexport class UILoader {\n  @bindable()\n  public busy: boolean = false;\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-text-divider\")\n@inlineView(\n  \"<template><fieldset class='ui-text-divider'><legend ref='vmElement'><slot></slot></legend></fieldset></template>\"\n)\nexport class UITextDivider {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { UIDivider } from \"./ui-divider\";\nimport { UIDragHandle } from \"./ui-drag-handle\";\nimport { UIDrop } from \"./ui-drop\";\nimport { UIFiller } from \"./ui-filler\";\nimport { UILoader } from \"./ui-loader\";\nimport { UITextDivider } from \"./ui-text-divider\";\n\nexport const Shared = [UIDivider, UIDrop, UIFiller, UILoader, UITextDivider, UIDragHandle];\n"],"names":[],"mappings":"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"}