{"version":3,"file":"ui-shared.js","sources":["../../src/shared/ui-divider.ts","../../src/shared/ui-drag-handle.ts","../../src/shared/ui-drop.ts","../../src/shared/ui-filler.ts","../../src/shared/ui-loader.ts","../../src/shared/ui-text-divider.ts","../../src/shared/ui-shared.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-divider\")\n@inlineView(\"<template class='ui-divider'><slot></slot></template>\")\nexport class UIDivider {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\nimport { UIInternal } from \"../utils/ui-internal\";\n\n@customElement(\"ui-drag-handle\")\n@inlineView(`<template class=\"ui-drag-handle\" ui-color=\"gray\"\n    mousedown.trigger=\"fireDragEvent($event,'dragstart')\" click.trigger=\"fireDragEvent($event,'dragend')\"><ui-svg-icon icon=\"drag\"></ui-svg-icon></template>`)\nexport class UIDragHandle {\n  constructor(protected element: Element) {}\n\n  protected fireDragEvent($event: UIEvent, evt) {\n    this.element.dispatchEvent(UIInternal.createEvent(evt));\n    return true;\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2018\n * @license   : MIT\n */\nimport { Subscription } from \"aurelia-event-aggregator\";\nimport { bindable, containerless, customElement, inlineView } from \"aurelia-framework\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport { UIInternal } from \"../utils/ui-internal\";\nimport { UITether } from \"../utils/ui-tether\";\n\n@containerless()\n@customElement(\"ui-drop\")\n@inlineView(\n  `<template><div slot=\"ui-drop\" class=\"ui-drop\" click.delegate=\"closeDrop()\" data-open.bind=\"isOpen\">\n  <div ref=\"vmElement\" class=\"ui-drop__body \\${class}\" click.delegate=\"close($event)\"><slot></slot></div>\n  </div></template>`\n)\nexport class UIDrop {\n  @bindable()\n  public class: string = \"\";\n\n  public vmElement: HTMLDivElement;\n\n  public isOpen: boolean = false;\n  public stretch: boolean = true;\n  public closeOnClick: boolean = true;\n  public attachToViewport: boolean = false;\n\n  public position: UITether.Position;\n  public anchorPosition: UITether.Position;\n  private tetherObj: UITether.Tether;\n\n  private anchorEl: Element;\n  private obClick: Subscription;\n  private obResize: ResizeObserver;\n  private obViewportResize: Subscription;\n\n  constructor(protected element: Element) {\n    this.position = (element.getAttribute(\"position\") as UITether.Position) || \"tl\";\n    this.anchorPosition = (element.getAttribute(\"anchor\") as UITether.Position) || \"bl\";\n    this.closeOnClick = !isFalse(element.getAttribute(\"close-on-click\"));\n    this.attachToViewport = element.hasAttribute(\"attach-to-viewport\");\n  }\n\n  public tether(anchorEl: Element) {\n    this.tetherObj = UITether.tether((this.anchorEl = anchorEl), this.vmElement, {\n      anchorPosition: this.anchorPosition,\n      attachToViewport: this.attachToViewport,\n      position: this.position,\n      resize: this.stretch\n    });\n  }\n\n  public updatePosition() {\n    this.tetherObj.updatePosition();\n  }\n\n  public toggleDrop(open?: boolean): void {\n    this.disposeListeners();\n    this.vmElement.dataset.show = \"false\";\n    this.isOpen = open === undefined ? !this.isOpen : open;\n    if (this.isOpen) {\n      this.obClick = UIInternal.subscribe(UIInternal.EVT_VIEWPORT_CLICK, t => this.canClose(t));\n      // observe viewport resize\n      this.obViewportResize = UIInternal.subscribe(UIInternal.EVT_VIEWPORT_RESIZE, () =>\n        this.updatePosition()\n      );\n      // observe body resize\n      this.obResize = new ResizeObserver(() => this.updatePosition());\n      this.obResize.observe(this.vmElement);\n      this.obResize.observe(this.anchorEl);\n      this.element.dispatchEvent(UIInternal.createEvent(\"open\"));\n      UIInternal.queueMicroTask(() => {\n        this.tetherObj.updatePosition();\n        this.vmElement.dataset.show = \"true\";\n      });\n    }\n  }\n\n  public closeDrop() {\n    UIInternal.queueTask(() => {\n      this.isOpen = false;\n      this.disposeListeners();\n      this.element.dispatchEvent(UIInternal.createEvent(\"close\"));\n    });\n  }\n\n  protected disposeListeners(): void {\n    if (this.obClick) {\n      this.obClick.dispose();\n    }\n    if (this.obResize) {\n      this.obResize.disconnect();\n    }\n    if (this.obViewportResize) {\n      this.obViewportResize.dispose();\n    }\n  }\n\n  protected detached(): void {\n    this.disposeListeners();\n    if (this.tetherObj) {\n      this.tetherObj.dispose();\n    }\n  }\n\n  protected close($event: UIEvent) {\n    if (this.closeOnClick) {\n      this.closeDrop();\n    } else {\n      $event.stopEvent(true);\n    }\n  }\n\n  private canClose(t: Element): void {\n    if (!hasParent(t, this.vmElement) && !hasParent(t, this.anchorEl)) {\n      this.closeDrop();\n    }\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-filler\")\n@inlineView(\"<template class='ui-col ui-col--fill'></template>\")\nexport class UIFiller {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\nimport { bindable, customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-loader\")\n@inlineView(`<template><div ref=\"vmElement\" class=\"ui-loader\" if.bind=\"busy\">\n  <div><ui-svg-icon icon=\"loader\" class=\"ui-anim--spin\"></ui-svg-icon></div>\n</div></template>`)\nexport class UILoader {\n  @bindable()\n  public busy: boolean = false;\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-text-divider\")\n@inlineView(\n  \"<template><fieldset class='ui-text-divider'><legend ref='vmElement'><slot></slot></legend></fieldset></template>\"\n)\nexport class UITextDivider {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { UIDivider } from \"./ui-divider\";\nimport { UIDragHandle } from \"./ui-drag-handle\";\nimport { UIDrop } from \"./ui-drop\";\nimport { UIFiller } from \"./ui-filler\";\nimport { UILoader } from \"./ui-loader\";\nimport { UITextDivider } from \"./ui-text-divider\";\n\nexport const Shared = [UIDivider, UIDrop, UIFiller, UILoader, UITextDivider, UIDragHandle];\n"],"names":[],"mappings":"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"}