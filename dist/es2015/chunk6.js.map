{"version":3,"file":"chunk6.js","sources":["../../src/forms/base-input.ts","../../src/forms/input-wrapper.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { computedFrom } from \"aurelia-framework\";\nimport { UIDrop } from \"../shared/ui-drop\";\nimport { UIInternal } from \"../utils/ui-internal\";\n\nexport class BaseInput {\n  public value: AnyObject;\n\n  protected inputEl: HTMLInputElement | HTMLTextAreaElement;\n\n  protected errors: string | string[];\n  protected maxlength: number = 0;\n  protected allowClear: boolean = false;\n  protected showCounter: boolean = false;\n\n  protected readonly: string | boolean = false;\n  protected disabled: string | boolean = false;\n  protected isDisabled: string | boolean = false;\n\n  protected dropHandle: string;\n  protected dropEl: UIDrop;\n\n  constructor(protected element: Element) {\n    this.allowClear = element.hasAttribute(\"clear\") || element.hasAttribute(\"clear.trigger\");\n    this.showCounter = element.hasAttribute(\"counter\");\n  }\n\n  public focus() {\n    this.inputEl.focus();\n  }\n\n  public disable(b: boolean): void {\n    this.isDisabled = b;\n  }\n\n  @computedFrom(\"isDisabled\", \"disabled\", \"readonly\", \"errors\", \"errors.length\")\n  get classes(): string {\n    const classes = [];\n    if (this.errors && this.errors.length > 0) {\n      classes.push(\"ui-input--invalid\");\n    }\n    if (this.isTrue(\"readonly\")) {\n      classes.push(\"ui-input--readonly\");\n    }\n    if (this.isTrue(\"disabled\") || this.isDisabled) {\n      classes.push(\"ui-input--disabled\");\n    }\n    return classes.join(\" \");\n  }\n\n  protected bind(): void {\n    this.readonly = this.isTrue(\"readonly\");\n    this.disabled = this.isTrue(\"disabled\");\n  }\n\n  protected clear(): void {\n    this.value = \"\";\n    this.inputEl.focus();\n    this.element.dispatchEvent(UIInternal.createEvent(\"clear\"));\n    this.element.dispatchEvent(UIInternal.createEvent(\"change\"));\n  }\n\n  protected fireEnter($event: KeyboardEvent): boolean {\n    if ($event.keyCode === 13) {\n      $event.stopEvent();\n      this.element.dispatchEvent(UIInternal.createEvent(\"enterpressed\", this.value));\n    }\n    return true;\n  }\n\n  protected canToggleDrop(evt: FocusEvent): void {\n    if (evt.relatedTarget && evt.relatedTarget !== this.inputEl) {\n      this.toggleDrop(false);\n    }\n  }\n\n  protected toggleDrop(open?: boolean): boolean {\n    if (open === true && this.dropEl.isOpen) {\n      UIInternal.queueMicroTask(() => this.dropEl.updatePosition());\n      return;\n    }\n    const beforeEvent = this.dropEl.isOpen && !open ? \"beforeclose\" : \"beforeopen\";\n    const afterEvent = this.dropEl.isOpen && !open ? \"close\" : \"open\";\n    if (this.element.dispatchEvent(UIInternal.createEvent(beforeEvent)) !== false) {\n      this.dropEl.toggleDrop(open);\n      this.element.dispatchEvent(UIInternal.createEvent(afterEvent));\n      if (this.dropEl.isOpen) {\n        this.inputEl.select();\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  private isTrue(prop: string): boolean {\n    return this[prop] === \"\" || this[prop] === prop || isTrue(this[prop]);\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { containerless, inlineView, processContent } from \"aurelia-framework\";\nimport view from \"./input-wrapper.html\";\n\n@containerless()\n@inlineView(view)\n@processContent((compiler, resources, node, instruction) => {\n  instruction.inheritBindingContext = true;\n  return true;\n})\nexport class InputWrapper {}\n"],"names":["tslib_1.__decorate"],"mappings":";;;;MAWa,SAAS;IAiBpB,YAAsB,OAAgB;QAAhB,YAAO,GAAP,OAAO,CAAS;QAX5B,cAAS,GAAW,CAAC,CAAC;QACtB,eAAU,GAAY,KAAK,CAAC;QAC5B,gBAAW,GAAY,KAAK,CAAC;QAE7B,aAAQ,GAAqB,KAAK,CAAC;QACnC,aAAQ,GAAqB,KAAK,CAAC;QACnC,eAAU,GAAqB,KAAK,CAAC;QAM7C,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;QACzF,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;KACpD;IAEM,KAAK;QACV,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;KACtB;IAEM,OAAO,CAAC,CAAU;QACvB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;KACrB;IAGD,IAAI,OAAO;QACT,MAAM,OAAO,GAAG,EAAE,CAAC;QACnB,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACzC,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;SACnC;QACD,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE;YAC3B,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;SACpC;QACD,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,UAAU,EAAE;YAC9C,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;SACpC;QACD,OAAO,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAC1B;IAES,IAAI;QACZ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;QACxC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;KACzC;IAES,KAAK;QACb,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;QAChB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;QACrB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5D,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC;KAC9D;IAES,SAAS,CAAC,MAAqB;QACvC,IAAI,MAAM,CAAC,OAAO,KAAK,EAAE,EAAE;YACzB,MAAM,CAAC,SAAS,EAAE,CAAC;YACnB,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;SAChF;QACD,OAAO,IAAI,CAAC;KACb;IAES,aAAa,CAAC,GAAe;QACrC,IAAI,GAAG,CAAC,aAAa,IAAI,GAAG,CAAC,aAAa,KAAK,IAAI,CAAC,OAAO,EAAE;YAC3D,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SACxB;KACF;IAES,UAAU,CAAC,IAAc;QACjC,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACvC,UAAU,CAAC,cAAc,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC;YAC9D,OAAO;SACR;QACD,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,IAAI,GAAG,aAAa,GAAG,YAAY,CAAC;QAC/E,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,IAAI,GAAG,OAAO,GAAG,MAAM,CAAC;QAClE,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,KAAK,KAAK,EAAE;YAC7E,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC,CAAC;YAC/D,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;gBACtB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;gBACtB,OAAO,IAAI,CAAC;aACb;iBAAM;gBACL,OAAO,KAAK,CAAC;aACd;SACF;KACF;IAEO,MAAM,CAAC,IAAY;QACzB,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;KACvE;CACF;AA9DCA;IADC,YAAY,CAAC,YAAY,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,eAAe,CAAC;;;wCAa7E;;;;ICtCU,YAAY,GAAzB,MAAa,YAAY;CAAG,CAAA;AAAf,YAAY;IANxB,aAAa,EAAE;IACf,UAAU,CAAC,IAAI,CAAC;IAChB,cAAc,CAAC,CAAC,QAAQ,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW;QACrD,WAAW,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACzC,OAAO,IAAI,CAAC;KACb,CAAC;GACW,YAAY,CAAG;;;;"}