{"version":3,"file":"ui-format.js","sources":["../../src/utils/ui-format.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { format, formatDistance, formatDistanceStrict, isValid, parseISO, toDate } from \"date-fns\";\nimport kramed from \"kramed\";\nimport numeral from \"numeral\";\n\nexport namespace UIFormat {\n  export function toHTML(md): string {\n    return kramed(md, {\n      gfm: true,\n      tables: true,\n      breaks: true,\n      pedantic: false,\n      sanitize: false,\n      smartLists: true,\n      smartypants: false\n    }).replace(/(<a href=)/gi, '<a class=\"ui-link\" target=\"_blank\" href=');\n  }\n\n  // Dates\n  function parseDate(dt: string | Date) {\n    return typeof dt === \"string\" ? parseISO(dt) : dt;\n  }\n\n  export function date(dt: AnyObject, ft: string = \"dd MMM yyyy\"): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, ft, { useAdditionalDayOfYearTokens: true, useAdditionalWeekYearTokens: true });\n  }\n\n  export function time(dt: AnyObject, ft: string = \"hh:mm a\"): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, ft, { useAdditionalDayOfYearTokens: true, useAdditionalWeekYearTokens: true });\n  }\n\n  export function datetime(dt: AnyObject, ft: string = \"dd MMM yyyy hh:mm a\"): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, ft, { useAdditionalDayOfYearTokens: true, useAdditionalWeekYearTokens: true });\n  }\n\n  export function utcDate(dt): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt) ? null : toDate(dt).toISOString();\n  }\n\n  export function dateToISO(dt): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\", {\n          useAdditionalDayOfYearTokens: true,\n          useAdditionalWeekYearTokens: true\n        });\n  }\n\n  export function age(dt: AnyObject): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt) ? \"\" : formatDistanceStrict(dt, new Date());\n  }\n\n  export function fromNow(dt: AnyObject): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt) ? \"\" : formatDistance(dt, new Date(), { addSuffix: true });\n  }\n\n  // Numbers\n  export function number(nm: AnyObject, fm: string = \"0,0[.]00\"): string {\n    return nm === null || isNaN(nm) ? \"\" : numeral(nm).format(fm);\n  }\n\n  export function currency(nm: AnyObject, sy: string = \"$\", fm: string = \"$ 0,0.00\"): string {\n    return nm === null || isNaN(nm)\n      ? \"\"\n      : numeral(nm)\n          .format(fm)\n          .replace(\"$\", sy);\n  }\n\n  export function percent(nm: AnyObject): string {\n    return nm === null || isNaN(nm) ? \"\" : numeral(nm > 1 ? nm / 100 : nm).format(\"0.00%\");\n  }\n}\n"],"names":["parseISO","isValid","format","toDate","formatDistanceStrict","formatDistance","UIFormat"],"mappings":"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"}