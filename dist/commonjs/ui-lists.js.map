{"version":3,"file":"ui-lists.js","sources":["../../src/lists/ui-dropdown.ts","../../src/lists/list-container.ts","../../src/lists/list-input.ts","../../src/lists/list-maker.ts","../../src/lists/ui-list.ts","../../src/lists/ui-select.ts","../../src/lists/ui-lists.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { bindable, bindingMode, computedFrom, customElement, inlineView } from \"aurelia-framework\";\nimport { UIDrop } from \"../shared/ui-drop\";\nimport { UIInternal } from \"../utils/ui-internal\";\nimport view from \"./ui-dropdown.html\";\n\n@customElement(\"ui-dropdown\")\n@inlineView(view)\nexport class UIDropdown {\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: AnyObject = undefined;\n\n  @bindable()\n  public errors: string[];\n\n  @bindable()\n  public name: string = \"\";\n  @bindable()\n  public placeholder: string = \"Select\";\n\n  @bindable()\n  public labelProperty: string = \"\";\n  @bindable()\n  public valueProperty: string = \"\";\n  @bindable()\n  public iconProperty: string = \"\";\n  @bindable()\n  public iconPrefix: string = \"\";\n  @bindable()\n  public options: AnyObject[];\n\n  @bindable()\n  public disabled: boolean = false;\n  @bindable()\n  public multiple: boolean = false;\n\n  protected dropEl: UIDrop;\n  protected model: AnyObject = undefined;\n\n  constructor(protected element: Element) {}\n\n  protected attached() {\n    this.dropEl.tether(this.element);\n    this.valueChanged();\n  }\n\n  protected valueChanged(): void {\n    if (this.options) {\n      this.model = this.options.find(o => (o[this.valueProperty] || o) === this.value);\n    }\n  }\n\n  protected select(model: AnyObject): void {\n    this.model = model;\n    this.value = this.model[this.valueProperty] || this.model;\n  }\n\n  @computedFrom(\"model\")\n  get selectedLabel() {\n    return !isNull(this.model) ? this.model[this.labelProperty] || this.model : this.placeholder;\n  }\n\n  protected toggleDrop($event: Event): void {\n    $event.stopEvent();\n    const beforeEvent = this.dropEl.isOpen ? \"beforeopen\" : \"beforeclose\";\n    const afterEvent = this.dropEl.isOpen ? \"close\" : \"open\";\n    if (this.element.dispatchEvent(UIInternal.createEvent(beforeEvent)) !== false) {\n      this.dropEl.toggleDrop();\n      this.element.dispatchEvent(UIInternal.createEvent(afterEvent));\n    }\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { containerless, inlineView, processContent } from \"aurelia-framework\";\nimport view from \"./list-container.html\";\n\n@containerless()\n@inlineView(view)\n@processContent((compiler, resources, node, instruction) => {\n  instruction.inheritBindingContext = true;\n  return true;\n})\nexport class ListContainer {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { containerless, inlineView, processContent } from \"aurelia-framework\";\nimport view from \"./list-input.html\";\n\n@containerless()\n@inlineView(view)\n@processContent((compiler, resources, node, instruction) => {\n  instruction.inheritBindingContext = true;\n  return true;\n})\nexport class ListInput {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { BaseInput } from \"../forms/base-input\";\nimport { UIInternal } from \"../utils/ui-internal\";\n\nconst KEY_DOWN = 40;\nconst KEY_UP = 38;\nconst BACKSPACE = 8;\nconst ENTER = 13;\n\nexport class ListMaker extends BaseInput {\n  public value: AnyObject = undefined;\n  public model: AnyObject = undefined;\n\n  public errors: string[];\n\n  public name: string = \"\";\n  public placeholder: string = \"\";\n\n  public labelProperty: string = \"\";\n  public valueProperty: string = \"\";\n  public groupProperty: string = \"\";\n  public query: ({ query }) => AnyObject[];\n  public options: AnyObject[] = [];\n\n  public readonly: boolean = false;\n  public disabled: boolean = false;\n\n  public noOptionsText: string = \"No Options\";\n\n  protected template;\n  protected innerOptions;\n\n  protected multiple: boolean = false;\n  protected listContainer: Element;\n\n  protected valueEl: Element;\n\n  protected inputValue: string = \"\";\n  protected isLoaded = false;\n  protected isLoading = false;\n  protected isGrouped = false;\n  protected isFiltered = false;\n  protected ignoreChange = false;\n  protected allowAny = false;\n\n  protected hilightIndex = -1;\n\n  protected matcher: ({ option, value }) => boolean;\n\n  protected valueChanged() {\n    if (this.ignoreChange) {\n      return;\n    }\n    if (!this.valueProperty) {\n      this.model = this.value;\n      if (!this.multiple) {\n        this.inputValue = this.value ? this.value[this.labelProperty] || this.value : \"\";\n      }\n      return;\n    }\n    if (this.options && !isNull(this.value)) {\n      if (this.multiple) {\n        this.model = this.options.filter(o => {\n          if (this.matcher) {\n            return this.value.some(value => {\n              return this.matcher({ option: o, value });\n            });\n          } else {\n            return this.value.includes(o[this.valueProperty] || o);\n          }\n        });\n      } else {\n        this.model = this.options.find(o => {\n          if (this.matcher) {\n            return this.matcher({ option: o, value: this.value });\n          } else {\n            return this.value === (o[this.valueProperty] || o);\n          }\n        });\n      }\n    } else {\n      this.model = null;\n      this.inputValue = \"\";\n    }\n    if (!this.dropEl) {\n      UIInternal.queueTask(() => {\n        const selected = this.listContainer.querySelector(\".ui-list__item--selected\");\n        if (selected) {\n          selected.scrollIntoView({ block: \"nearest\" });\n        }\n      });\n    }\n    this.resetQuery();\n  }\n\n  protected toggleDrop(open?: boolean): boolean {\n    if (this.dropEl) {\n      if (open === true && this.dropEl.isOpen) {\n        UIInternal.queueMicroTask(() => this.dropEl.updatePosition());\n        return;\n      }\n      if (super.toggleDrop(open)) {\n        this.loadOptions();\n      }\n    }\n  }\n\n  protected loadOptions() {\n    if (this.query) {\n      this.fetchOptions();\n    } else {\n      this.buildOptions(this.options);\n    }\n  }\n\n  protected filterOptions() {\n    this.isFiltered = !!this.inputValue;\n    if (this.query) {\n      this.fetchOptions(this.inputValue);\n    } else {\n      const query = this.inputValue.ascii().toLowerCase();\n      const options = this.options.filter(o =>\n        (o[this.labelProperty] || o)\n          .toString()\n          .ascii()\n          .toLowerCase()\n          .includes(query)\n      );\n      this.buildOptions(options);\n    }\n  }\n\n  protected selectOption(model) {\n    this.ignoreChange = true;\n    this.hilightIndex = -1;\n    if (this.multiple) {\n      if (!(this.value || []).includes(model[this.valueProperty] || model)) {\n        this.value = this.value\n          ? [...this.value, model[this.valueProperty] || model]\n          : [model[this.valueProperty] || model];\n        this.model = this.model ? [...this.model, model] : [model];\n      }\n      this.inputValue = \"\";\n      this.inputEl.focus();\n      this.inputEl.select();\n    } else {\n      if (this.labelProperty) {\n        model.$label = model[this.labelProperty] || model;\n      }\n      this.value = model[this.valueProperty] || model;\n      this.model = model;\n      this.resetQuery();\n      if (this.dropEl) {\n        this.dropEl.closeDrop();\n      }\n    }\n    if (this.isFiltered) {\n      this.isFiltered = false;\n      this.loadOptions();\n    }\n    this.element.dispatchEvent(UIInternal.createEvent(\"change\", this.value));\n    this.element.dispatchEvent(UIInternal.createEvent(\"select\", this.model));\n    setTimeout(() => (this.ignoreChange = false), 500);\n  }\n\n  protected removeOption(model) {\n    this.ignoreChange = true;\n    this.model = [...this.model.filter(m => m !== model)];\n    this.value = this.value.filter(m => m !== (model[this.valueProperty] || model));\n    setTimeout(() => (this.ignoreChange = false), 500);\n  }\n\n  protected resetQuery(clearFilter?: boolean) {\n    this.hilightIndex = -1;\n    if (this.multiple) {\n      this.inputValue = \"\";\n    } else {\n      this.inputValue = this.model\n        ? (this.model[this.labelProperty] || this.model).replace(\"<u>\", \"\").replace(\"</u>\", \"\")\n        : \"\";\n    }\n    if (clearFilter && this.isFiltered) {\n      this.isFiltered = false;\n      this.loadOptions();\n    }\n  }\n\n  protected clear() {\n    this.model = null;\n    this.value = null;\n    this.inputValue = \"\";\n    this.inputEl.focus();\n    if (this.isFiltered) {\n      this.loadOptions();\n    }\n  }\n\n  protected listClass(option, index): string {\n    const classes = [\"ui-list__item\"];\n    option.__selected = false;\n    if (!this.multiple) {\n      if (this.matcher) {\n        if (this.matcher({ option, value: this.value })) {\n          option.__selected = true;\n          classes.push(\"ui-list__item--selected\");\n        }\n      } else if ((option[this.valueProperty] || option) === this.value) {\n        option.__selected = true;\n        classes.push(\"ui-list__item--selected\");\n      }\n    } else if (this.multiple && this.value) {\n      if (this.matcher) {\n        this.value.forEach(value => {\n          if (this.matcher({ option, value })) {\n            option.__selected = true;\n            classes.push(\"ui-list__item--disabled\");\n          }\n        });\n      } else if (this.value.includes(option[this.valueProperty] || option)) {\n        option.__selected = true;\n        classes.push(\"ui-list__item--disabled\");\n      }\n    }\n    if (this.hilightIndex === index) {\n      classes.push(\"ui-list__item--hilight\");\n    }\n    return classes.join(\" \");\n  }\n\n  protected buildOption(option: AnyObject, el: Element, unmark: boolean = false): boolean {\n    if (el) {\n      el.innerHTML = \"\";\n      const tpl = this.template\n        ? this.template.outerHTML\n        : `<template><div innerhtml.bind=\"$label\"></div></template>`;\n      const model = {\n        $label:\n          this.isFiltered && !unmark\n            ? this.markOption(option)\n            : option[this.labelProperty] || option,\n        $model: option,\n        $value: option[this.valueProperty] || option\n      };\n      // if (isObject(option)) {\n      //   Object.assign(model, option);\n      // }\n      const view = UIInternal.compileTemplate(tpl, model);\n      view.appendNodesTo(el);\n    }\n    return true;\n  }\n\n  protected checkKeyEvent($event: KeyboardEvent): boolean {\n    if ([KEY_DOWN, KEY_UP].includes($event.keyCode)) {\n      if (this.dropEl && !this.dropEl.isOpen) {\n        this.dropEl.toggleDrop();\n      }\n      if ($event.keyCode === KEY_DOWN) {\n        this.hilightIndex =\n          this.hilightIndex === -1 && this.model\n            ? this.innerOptions.indexOf(this.model)\n            : this.hilightIndex >= this.innerOptions.length || this.hilightIndex < -1\n            ? -1\n            : this.hilightIndex;\n        while (\n          this.hilightIndex + 1 !== this.innerOptions.length &&\n          (this.innerOptions[this.hilightIndex + 1].__type === \"group\" ||\n            this.innerOptions[this.hilightIndex + 1].__selected ||\n            this.innerOptions[this.hilightIndex + 1].__disabled)\n          ) {\n          this.hilightIndex++;\n        }\n        this.hilightIndex = this.hilightIndex + 1;\n      }\n      if ($event.keyCode === KEY_UP) {\n        this.hilightIndex =\n          this.hilightIndex === -1 && this.model\n            ? this.innerOptions.indexOf(this.model)\n            : this.hilightIndex === -1\n            ? this.innerOptions.length\n            : this.hilightIndex;\n\n        while (\n          this.hilightIndex - 1 > 0 &&\n          (this.innerOptions[this.hilightIndex - 1].__type === \"group\" ||\n            this.innerOptions[this.hilightIndex - 1].__selected ||\n            this.innerOptions[this.hilightIndex - 1].__disabled)\n          ) {\n          this.hilightIndex--;\n        }\n        this.hilightIndex = this.hilightIndex - 1;\n      }\n      UIInternal.queueTask(() => {\n        const selected = this.listContainer.querySelector(\".ui-list__item--hilight\");\n        if (selected) {\n          selected.scrollIntoView({ block: \"nearest\" });\n        }\n      });\n      $event.stopEvent();\n    } else if (this.hilightIndex !== -1 && $event.keyCode === ENTER) {\n      this.selectOption(this.innerOptions[this.hilightIndex]);\n      $event.stopEvent();\n    } else if (this.allowAny && !!this.inputValue.trim() && $event.keyCode === ENTER) {\n      this.selectOption(this.inputValue);\n      $event.stopEvent();\n    } else if (this.multiple && $event.keyCode === BACKSPACE) {\n      if (this.model.length > 0 && this.inputValue.length === 0) {\n        $event.stopEvent();\n        this.removeOption(this.model.last());\n      }\n    } else {\n      this.fireEnter($event);\n    }\n    return true;\n  }\n\n  private async fetchOptions(query?: string) {\n    this.showLoading();\n    const result = await this.query({ query });\n    if (!this.options) {\n      this.options = result;\n    }\n    this.buildOptions(result || []);\n  }\n\n  private showLoading() {\n    this.isLoaded = false;\n    this.isLoading = true;\n    this.innerOptions = [];\n    if (this.dropEl) {\n      UIInternal.queueMicroTask(() => this.dropEl.updatePosition());\n    }\n  }\n\n  private buildOptions(options: AnyObject[], silent: boolean = false): void {\n    if (!silent) {\n      this.showLoading();\n    }\n    const optionsClone = options.map(o => (isString(o) ? `${o}` : { ...o }));\n    UIInternal.queueTask(() => {\n      this.isLoading = false;\n\n      if (this.groupProperty) {\n        const groups = optionsClone\n          .sortBy([this.groupProperty, this.labelProperty])\n          .groupBy(this.groupProperty);\n        groups.forEach((items, label) =>\n          this.innerOptions.push({ __type: \"group\", label }, ...items)\n        );\n      } else {\n        this.innerOptions = optionsClone.sortBy(this.labelProperty);\n      }\n      this.isLoaded = true;\n      UIInternal.queueTask(() => {\n        const selected = this.listContainer.querySelector(\".ui-list__item--selected\");\n        if (selected) {\n          selected.scrollIntoView({ block: \"nearest\" });\n        }\n      });\n      if (this.dropEl) {\n        UIInternal.queueTask(() => this.dropEl.updatePosition());\n      }\n    });\n  }\n\n  private markOption(option: AnyObject): void {\n    let lbl = option[this.labelProperty] || `${option}`;\n    if (isEmpty(this.inputValue)) {\n      return lbl;\n    }\n    const rx = new RegExp(this.inputValue, \"i\");\n    const asc = lbl.toString().ascii();\n    if (rx.test(asc)) {\n      const start = asc.search(rx);\n      lbl =\n        lbl.substr(0, start) +\n        \"<u>\" +\n        lbl.substr(start, this.inputValue.length) +\n        \"</u>\" +\n        lbl.substr(start + this.inputValue.length);\n    }\n    return lbl;\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { bindable, bindingMode, customElement, inlineView, viewResources } from \"aurelia-framework\";\nimport { InputWrapper } from \"../forms/input-wrapper\";\nimport { ListContainer } from \"./list-container\";\nimport { ListInput } from \"./list-input\";\nimport { ListMaker } from \"./list-maker\";\nimport view from \"./ui-list.html\";\n\n@customElement(\"ui-list\")\n@viewResources(InputWrapper, ListInput, ListContainer)\n@inlineView(view)\nexport class UIList extends ListMaker {\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: AnyObject = undefined;\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public model: AnyObject = undefined;\n\n  @bindable()\n  public errors: string[];\n\n  @bindable()\n  public name: string = \"\";\n  @bindable()\n  public height: string = \"20em\";\n  @bindable()\n  public placeholder: string = \"\";\n\n  @bindable()\n  public labelProperty: string = \"\";\n  @bindable()\n  public valueProperty: string = \"\";\n  @bindable()\n  public groupProperty: string = \"\";\n  @bindable()\n  public query: ({ query }) => AnyObject[];\n  @bindable()\n  public options: AnyObject[];\n\n  @bindable()\n  public readonly: boolean = false;\n  @bindable()\n  public disabled: boolean = false;\n\n  @bindable()\n  public noOptionsText: string = \"No Options\";\n\n  @bindable()\n  public matcher: ({ option, value }) => boolean;\n\n  constructor(protected element: Element) {\n    super(element);\n    this.multiple = element.hasAttribute(\"multiple\");\n    this.allowAny = element.hasAttribute(\"allow-any\");\n\n    this.template = this.element.querySelector(\"template\");\n  }\n\n  protected bind(): void {\n    if (!isNull(this.model)) {\n      if (this.multiple) {\n        this.value = this.multiple\n          ? this.model.map(o => o[this.valueProperty] || o)\n          : this.model[this.labelProperty] || this.model;\n      }\n    }\n    this.isGrouped = !!this.groupProperty;\n    this.valueChanged();\n  }\n\n  protected attached(): void {\n    this.loadOptions();\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { bindable, bindingMode, customElement, inlineView, viewResources } from \"aurelia-framework\";\nimport { InputWrapper } from \"../forms/input-wrapper\";\nimport { ListContainer } from \"./list-container\";\nimport { ListInput } from \"./list-input\";\nimport { ListMaker } from \"./list-maker\";\nimport view from \"./ui-select.html\";\n\n@customElement(\"ui-select\")\n@viewResources(InputWrapper, ListInput, ListContainer)\n@inlineView(view)\nexport class UISelect extends ListMaker {\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public value: AnyObject = undefined;\n  @bindable({ defaultBindingMode: bindingMode.twoWay })\n  public model: AnyObject = undefined;\n\n  @bindable()\n  public errors: string[];\n\n  @bindable()\n  public name: string = \"\";\n  @bindable()\n  public placeholder: string = \"\";\n\n  @bindable()\n  public labelProperty: string = \"\";\n  @bindable()\n  public valueProperty: string = \"\";\n  @bindable()\n  public groupProperty: string = \"\";\n  @bindable()\n  public query: ({ query }) => AnyObject[];\n  @bindable()\n  public options: AnyObject[];\n\n  @bindable()\n  public readonly: boolean = false;\n  @bindable()\n  public disabled: boolean = false;\n\n  @bindable()\n  public noOptionsText: string = \"No Options\";\n\n  @bindable()\n  public matcher: ({ option, value }) => boolean;\n\n  constructor(protected element: Element) {\n    super(element);\n    this.dropHandle = \"caret\";\n    this.multiple = element.hasAttribute(\"multiple\");\n    this.allowAny = element.hasAttribute(\"allow-any\");\n\n    this.template = this.element.querySelector(\"template\");\n  }\n\n  protected attached(): void {\n    this.dropEl.attachToViewport = isTrue(this.element.getAttribute(\"attach-to-viewport\"));\n    this.dropEl.closeOnClick = !this.multiple;\n    this.dropEl.tether(this.element);\n  }\n\n  protected bind(): void {\n    if (!isNull(this.model)) {\n      if (this.multiple) {\n        this.value = this.multiple\n          ? this.model.map(o => o[this.valueProperty] || o)\n          : this.model[this.labelProperty] || this.model;\n      }\n    }\n    this.isGrouped = !!this.groupProperty;\n    this.valueChanged();\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { UIDropdown } from \"./ui-dropdown\";\nimport { UIList } from \"./ui-list\";\nimport { UISelect } from \"./ui-select\";\n\nexport const Lists = [UIList, UISelect, UIDropdown];\n"],"names":["UIInternal","__decorate","bindable","bindingMode","computedFrom","customElement","inlineView","containerless","view","processContent","__extends","BaseInput","viewResources","InputWrapper"],"mappings":"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"}