{"version":3,"file":"ui-format.js","sources":["../../src/utils/ui-format.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { format, formatDistance, formatDistanceStrict, isValid, parseISO, toDate } from \"date-fns\";\nimport kramed from \"kramed\";\nimport numeral from \"numeral\";\n\nexport namespace UIFormat {\n  export function toHTML(md): string {\n    return kramed(md, {\n      gfm: true,\n      tables: true,\n      breaks: true,\n      pedantic: false,\n      sanitize: false,\n      smartLists: true,\n      smartypants: false\n    }).replace(/(<a href=)/gi, '<a class=\"ui-link\" target=\"_blank\" href=');\n  }\n\n  // Dates\n  function parseDate(dt: string | Date) {\n    return typeof dt === \"string\" ? parseISO(dt) : dt;\n  }\n\n  export function date(dt: AnyObject, ft: string = \"dd MMM yyyy\"): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, ft, { useAdditionalDayOfYearTokens: true, useAdditionalWeekYearTokens: true });\n  }\n\n  export function time(dt: AnyObject, ft: string = \"hh:mm a\"): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, ft, { useAdditionalDayOfYearTokens: true, useAdditionalWeekYearTokens: true });\n  }\n\n  export function datetime(dt: AnyObject, ft: string = \"dd MMM yyyy hh:mm a\"): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, ft, { useAdditionalDayOfYearTokens: true, useAdditionalWeekYearTokens: true });\n  }\n\n  export function utcDate(dt): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt) ? null : toDate(dt).toISOString();\n  }\n\n  export function dateToISO(dt): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt)\n      ? null\n      : format(dt, \"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\", {\n          useAdditionalDayOfYearTokens: true,\n          useAdditionalWeekYearTokens: true\n        });\n  }\n\n  export function age(dt: AnyObject): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt) ? \"\" : formatDistanceStrict(dt, new Date());\n  }\n\n  export function fromNow(dt: AnyObject): string {\n    dt = parseDate(dt);\n    return !dt || !isValid(dt) ? \"\" : formatDistance(dt, new Date(), { addSuffix: true });\n  }\n\n  // Numbers\n  export function number(nm: AnyObject, fm: string = \"0,0[.]00\"): string {\n    return nm === null || isNaN(nm) ? \"\" : numeral(nm).format(fm);\n  }\n\n  export function currency(nm: AnyObject, sy: string = \"$\", fm: string = \"$ 0,0.00\"): string {\n    return nm === null || isNaN(nm)\n      ? \"\"\n      : numeral(nm)\n          .format(fm)\n          .replace(\"$\", sy);\n  }\n\n  export function percent(nm: AnyObject): string {\n    return nm === null || isNaN(nm) ? \"\" : numeral(nm > 1 ? nm / 100 : nm).format(\"0.00%\");\n  }\n}\n"],"names":["parseISO","isValid","format","toDate","formatDistanceStrict","formatDistance","UIFormat"],"mappings":";;;;;;;;AAWA,WAAiB,QAAQ;IACvB,SAAgB,MAAM,CAAC,EAAE;QACvB,OAAO,MAAM,CAAC,EAAE,EAAE;YAChB,GAAG,EAAE,IAAI;YACT,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,IAAI;YACZ,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,KAAK;YACf,UAAU,EAAE,IAAI;YAChB,WAAW,EAAE,KAAK;SACnB,CAAC,CAAC,OAAO,CAAC,cAAc,EAAE,0CAA0C,CAAC,CAAC;KACxE;IAVe,eAAM,SAUrB,CAAA;IAGD,SAAS,SAAS,CAAC,EAAiB;QAClC,OAAO,OAAO,EAAE,KAAK,QAAQ,GAAGA,gBAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;KACnD;IAED,SAAgB,IAAI,CAAC,EAAa,EAAE,EAA0B;QAA1B,mBAAA,EAAA,kBAA0B;QAC5D,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACC,eAAO,CAAC,EAAE,CAAC;cACtB,IAAI;cACJC,cAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,4BAA4B,EAAE,IAAI,EAAE,2BAA2B,EAAE,IAAI,EAAE,CAAC,CAAC;KAC/F;IALe,aAAI,OAKnB,CAAA;IAED,SAAgB,IAAI,CAAC,EAAa,EAAE,EAAsB;QAAtB,mBAAA,EAAA,cAAsB;QACxD,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACD,eAAO,CAAC,EAAE,CAAC;cACtB,IAAI;cACJC,cAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,4BAA4B,EAAE,IAAI,EAAE,2BAA2B,EAAE,IAAI,EAAE,CAAC,CAAC;KAC/F;IALe,aAAI,OAKnB,CAAA;IAED,SAAgB,QAAQ,CAAC,EAAa,EAAE,EAAkC;QAAlC,mBAAA,EAAA,0BAAkC;QACxE,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACD,eAAO,CAAC,EAAE,CAAC;cACtB,IAAI;cACJC,cAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,4BAA4B,EAAE,IAAI,EAAE,2BAA2B,EAAE,IAAI,EAAE,CAAC,CAAC;KAC/F;IALe,iBAAQ,WAKvB,CAAA;IAED,SAAgB,OAAO,CAAC,EAAE;QACxB,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACD,eAAO,CAAC,EAAE,CAAC,GAAG,IAAI,GAAGE,cAAM,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;KAC9D;IAHe,gBAAO,UAGtB,CAAA;IAED,SAAgB,SAAS,CAAC,EAAE;QAC1B,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACF,eAAO,CAAC,EAAE,CAAC;cACtB,IAAI;cACJC,cAAM,CAAC,EAAE,EAAE,8BAA8B,EAAE;gBACzC,4BAA4B,EAAE,IAAI;gBAClC,2BAA2B,EAAE,IAAI;aAClC,CAAC,CAAC;KACR;IARe,kBAAS,YAQxB,CAAA;IAED,SAAgB,GAAG,CAAC,EAAa;QAC/B,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACD,eAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAGG,4BAAoB,CAAC,EAAE,EAAE,IAAI,IAAI,EAAE,CAAC,CAAC;KACxE;IAHe,YAAG,MAGlB,CAAA;IAED,SAAgB,OAAO,CAAC,EAAa;QACnC,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC,CAAC;QACnB,OAAO,CAAC,EAAE,IAAI,CAACH,eAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAGI,sBAAc,CAAC,EAAE,EAAE,IAAI,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;KACvF;IAHe,gBAAO,UAGtB,CAAA;IAGD,SAAgB,MAAM,CAAC,EAAa,EAAE,EAAuB;QAAvB,mBAAA,EAAA,eAAuB;QAC3D,OAAO,EAAE,KAAK,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;KAC/D;IAFe,eAAM,SAErB,CAAA;IAED,SAAgB,QAAQ,CAAC,EAAa,EAAE,EAAgB,EAAE,EAAuB;QAAzC,mBAAA,EAAA,QAAgB;QAAE,mBAAA,EAAA,eAAuB;QAC/E,OAAO,EAAE,KAAK,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC;cAC3B,EAAE;cACF,OAAO,CAAC,EAAE,CAAC;iBACR,MAAM,CAAC,EAAE,CAAC;iBACV,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;KACzB;IANe,iBAAQ,WAMvB,CAAA;IAED,SAAgB,OAAO,CAAC,EAAa;QACnC,OAAO,EAAE,KAAK,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,OAAO,CAAC,EAAE,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;KACxF;IAFe,gBAAO,UAEtB,CAAA;CACF,EAhFgBC,gBAAQ,KAARA,gBAAQ,QAgFxB"}