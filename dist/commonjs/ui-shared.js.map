{"version":3,"file":"ui-shared.js","sources":["../../src/shared/ui-divider.ts","../../src/shared/ui-drag-handle.ts","../../src/shared/ui-drop.ts","../../src/shared/ui-filler.ts","../../src/shared/ui-loader.ts","../../src/shared/ui-text-divider.ts","../../src/shared/ui-shared.ts"],"sourcesContent":["/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-divider\")\n@inlineView(\"<template class='ui-divider'><slot></slot></template>\")\nexport class UIDivider {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\nimport { UIInternal } from \"../utils/ui-internal\";\n\n@customElement(\"ui-drag-handle\")\n@inlineView(`<template class=\"ui-drag-handle\" ui-color=\"gray\"\n    mousedown.trigger=\"fireDragEvent($event,'dragstart')\" click.trigger=\"fireDragEvent($event,'dragend')\"><ui-svg-icon icon=\"drag\"></ui-svg-icon></template>`)\nexport class UIDragHandle {\n  constructor(protected element: Element) {}\n\n  protected fireDragEvent($event: UIEvent, evt) {\n    this.element.dispatchEvent(UIInternal.createEvent(evt));\n    return true;\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2018\n * @license   : MIT\n */\nimport { Subscription } from \"aurelia-event-aggregator\";\nimport { bindable, containerless, customElement, inlineView } from \"aurelia-framework\";\nimport { UIInternal } from \"../utils/ui-internal\";\nimport { UITether } from \"../utils/ui-tether\";\n\n@containerless()\n@customElement(\"ui-drop\")\n@inlineView(\n  `<template><div slot=\"ui-drop\" class=\"ui-drop\" mouseup.delegate=\"closeDrop()\" data-open.bind=\"isOpen\">\n  <div ref=\"vmElement\" class=\"ui-drop__body \\${class}\" mouseup.delegate=\"close($event)\"><slot></slot></div>\n  </div></template>`\n)\nexport class UIDrop {\n  @bindable()\n  public class: string = \"\";\n\n  public vmElement: HTMLDivElement;\n\n  public isOpen: boolean = false;\n  public stretch: boolean = true;\n  public closeOnClick: boolean = true;\n  public attachToViewport: boolean = false;\n\n  public position: UITether.Position;\n  public anchorPosition: UITether.Position;\n  private tetherObj: UITether.Tether;\n\n  private anchorEl: Element;\n  private obClick: Subscription;\n  private obResize: Subscription;\n\n  constructor(protected element: Element) {\n    this.position = (element.getAttribute(\"position\") as UITether.Position) || \"tl\";\n    this.anchorPosition = (element.getAttribute(\"anchor\") as UITether.Position) || \"bl\";\n    this.closeOnClick = !isFalse(element.getAttribute(\"close-on-click\"));\n    this.attachToViewport = element.hasAttribute(\"attach-to-viewport\");\n  }\n\n  public tether(anchorEl: Element) {\n    this.tetherObj = UITether.tether((this.anchorEl = anchorEl), this.vmElement, {\n      anchorPosition: this.anchorPosition,\n      attachToViewport: this.attachToViewport,\n      position: this.position,\n      resize: this.stretch\n    });\n  }\n\n  public updatePosition() {\n    this.tetherObj.updatePosition();\n  }\n\n  public toggleDrop(open?: boolean): void {\n    this.disposeListeners();\n    this.vmElement.dataset.show = \"false\";\n    this.isOpen = open === undefined ? !this.isOpen : open;\n    if (this.isOpen) {\n      this.obClick = UIInternal.subscribe(UIInternal.EVT_VIEWPORT_CLICK, t => this.canClose(t));\n      this.obResize = UIInternal.subscribe(UIInternal.EVT_VIEWPORT_RESIZE, t =>\n        this.updatePosition()\n      );\n      UIInternal.queueMicroTask(() => {\n        this.tetherObj.updatePosition();\n        this.vmElement.dataset.show = \"true\";\n      });\n    }\n  }\n\n  public closeDrop() {\n    UIInternal.queueTask(() => {\n      this.isOpen = false;\n      this.disposeListeners();\n      this.element.dispatchEvent(UIInternal.createEvent(\"close\"));\n    });\n  }\n\n  protected disposeListeners(): void {\n    if (this.obClick) {\n      this.obClick.dispose();\n    }\n    if (this.obResize) {\n      this.obResize.dispose();\n    }\n  }\n\n  protected detached(): void {\n    this.disposeListeners();\n    if (this.tetherObj) {\n      this.tetherObj.dispose();\n    }\n  }\n\n  private canClose(t: Element): void {\n    if (!hasParent(t, this.vmElement) && !hasParent(t, this.anchorEl)) {\n      this.closeDrop();\n    }\n  }\n\n  private close($event: UIEvent) {\n    $event.stopEvent();\n    if (this.closeOnClick) {\n      this.closeDrop();\n    }\n  }\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-filler\")\n@inlineView(\"<template class='ui-col ui-col--fill'></template>\")\nexport class UIFiller {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\nimport { bindable, customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-loader\")\n@inlineView(`<template><div ref=\"vmElement\" class=\"ui-loader\" if.bind=\"busy\">\n  <div><ui-svg-icon icon=\"loader\" class=\"ui-anim--spin\"></ui-svg-icon></div>\n</div></template>`)\nexport class UILoader {\n  @bindable()\n  public busy: boolean = false;\n}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { customElement, inlineView } from \"aurelia-framework\";\n\n@customElement(\"ui-text-divider\")\n@inlineView(\n  \"<template><fieldset class='ui-text-divider'><legend ref='vmElement'><slot></slot></legend></fieldset></template>\"\n)\nexport class UITextDivider {}\n","/**\n * @author    : Adarsh Pastakia\n * @version   : 5.0.0\n * @copyright : 2019\n * @license   : MIT\n */\n\nimport { UIDivider } from \"./ui-divider\";\nimport { UIDragHandle } from \"./ui-drag-handle\";\nimport { UIDrop } from \"./ui-drop\";\nimport { UIFiller } from \"./ui-filler\";\nimport { UILoader } from \"./ui-loader\";\nimport { UITextDivider } from \"./ui-text-divider\";\n\nexport const Shared = [UIDivider, UIDrop, UIFiller, UILoader, UITextDivider, UIDragHandle];\n"],"names":["customElement","inlineView","UIInternal","UITether","tslib_1.__decorate","bindable","containerless"],"mappings":"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"}